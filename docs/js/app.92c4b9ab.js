(function(e){function t(t){for(var a,_,i=t[0],c=t[1],s=t[2],u=0,d=[];u<i.length;u++)_=i[u],Object.prototype.hasOwnProperty.call(o,_)&&o[_]&&d.push(o[_][0]),o[_]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(d.length)d.shift()();return n.push.apply(n,s||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==o[c]&&(a=!1)}a&&(n.splice(t--,1),e=_(_.s=r[0]))}return e}var a={},o={app:0},n=[];function _(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,_),r.l=!0,r.exports}_.m=e,_.c=a,_.d=function(e,t,r){_.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},_.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},_.t=function(e,t){if(1&t&&(e=_(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(_.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)_.d(r,a,function(t){return e[t]}.bind(null,a));return r},_.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return _.d(t,"a",t),t},_.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},_.p="/ip-layout/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var l=c;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"08f7":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.show?r("VueDraggableResizable",{style:"position: absolute;  top:"+e.top+"px; left:"+e.left+"px;",attrs:{draggable:e.draggable,resizable:!1,w:"auto"}},[r("v-card",{attrs:{width:"266"}},[r("v-row",{attrs:{"no-gutters":""},on:{mousedown:function(t){e.draggable=!0},mouseleave:function(t){e.draggable=!1},mouseup:function(t){e.draggable=!1}}},[r("div",{staticClass:"headline ml-2 mt-1"},[e._v(" Template "+e._s(e.id)+" ")]),r("v-spacer"),r("v-icon",[e._v("mdi-drag")])],1),r("v-card-text",[r("v-textarea",{attrs:{label:"Matrix Form","auto-grow":"",outlined:"",rows:"1","hide-details":"",dense:""},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),r("v-card-actions",[r("v-btn",{attrs:{rounded:"",color:"error",dark:""},on:{click:e.deleteTemplate}},[e._v(" DELETE")]),r("v-btn",{attrs:{rounded:"",color:"primary"},on:{click:e.createTemplate}},[e._v("CREATE")]),r("v-btn",{attrs:{rounded:"",color:"secondary"},on:{click:e.randomColor}},[e._v("RANDOM")])],1)],1)],1):e._e()},o=[],n=(r("a9e3"),r("c0d6")),_=r("fb19"),i=r.n(_),c={name:"DragCard",components:{VueDraggableResizable:i.a},props:{top:Number,left:Number},data:function(){return{draggable:!1,id:null,content:"",show:!0}},mounted:function(){n["store"].DragCard=this},methods:{deleteTemplate:function(){n["store"].deleteTemplate(this.id)},createTemplate:function(){n["store"].createTemplate(this.content)},randomColor:function(){n["store"].changeColor()}}},s=c,l=r("2877"),u=r("6544"),d=r.n(u),p=r("8336"),f=r("b0af"),b=r("99d9"),v=r("132d"),m=r("0fd9"),g=r("2fa4"),w=r("a844"),h=Object(l["a"])(s,a,o,!1,null,"627f88c9",null);t["default"]=h.exports;d()(h,{VBtn:p["a"],VCard:f["a"],VCardActions:b["a"],VCardText:b["c"],VIcon:v["a"],VRow:m["a"],VSpacer:g["a"],VTextarea:w["a"]})},"324e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("SideDrawer",{attrs:{githubID:e.authors,items:e.items},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}}),r("v-app-bar",{attrs:{absolute:"",app:"",color:"transparent",flat:""}},[r("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!e.drawer}}}),r("h2",[e._v("ArchiWeb")])],1),r("v-main",{staticClass:"pt-0"},[r("v-btn",{staticStyle:{position:"absolute",top:"80px",right:"10px",background:"white"},attrs:{color:"primary",icon:"",fab:"",elevation:"5"},on:{click:e.send}},[r("v-icon",[e._v("mdi-send")])],1),r("v-btn",{staticStyle:{position:"absolute",top:"150px",right:"10px",background:"white"},attrs:{color:"primary",icon:"",fab:"",elevation:"5"},on:{click:e.revert}},[r("v-icon",[e._v("mdi-undo")])],1),r("Viewer",{attrs:{gui:!1,container:"ip-layout-ccdfdc",filename:"grid-cube.js"}}),r("Drawer"),e.$vuetify.breakpoint.mobile?e._e():r("Toolbox",{attrs:{id:"toolbox"}})],1)],1)},o=[],n=r("c0d6"),_=r("4d70"),i={name:"Viewport",components:{Drawer:_["default"]},data:function(){return{drawer:null,authors:["amomorning","whitegreen"],items:[{icon:"mdi-blur",title:"IP Layout",content:'This is a small application that can transfer the configured <b>templates</b> and <b>box domains</b> to the backend and generate the packing grid layout.  <br><br> The backend is Hua Hao\'s <a target="_blank" href="https://github.com/whitegreen/PackingDone">pack-grid</a> with 0-1 integer linear programming via <a target="_blank" href="https://www.gurobi.com/">Gurobi</a> Python.'}]}},methods:{send:function(){n["store"].sendData()},revert:function(){n["store"].revert()}}},c=i,s=r("2877"),l=r("6544"),u=r.n(l),d=r("7496"),p=r("40dc"),f=r("5bc1"),b=r("8336"),v=r("132d"),m=r("f6c4"),g=Object(s["a"])(c,a,o,!1,null,"7ec4d59e",null);t["default"]=g.exports;u()(g,{VApp:d["a"],VAppBar:p["a"],VAppBarNavIcon:f["a"],VBtn:b["a"],VIcon:v["a"],VMain:m["a"]})},"3dfd":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-view")},o=[],n={name:"App"},_=n,i=(r("034f"),r("2877")),c=Object(i["a"])(_,a,o,!1,null,null,null);t["default"]=c.exports},"402c":function(e,t,r){"use strict";r.r(t);var a=r("2b0e"),o=r("f309"),n=r("fcf4");a["a"].use(o["a"]),t["default"]=new o["a"]({theme:{themes:{light:{primary:n["a"].indigo.lighten1,secondary:n["a"].teal.base,accent:n["a"].indigo.base}}}})},4078:function(e,t,r){"use strict";r.r(t),r.d(t,"main",(function(){return h}));var a,o=r("b85c"),n=(r("159b"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("a15b"),r("a630"),r("d81d"),r("ac1f"),r("1276"),r("a9e3"),r("b645")),_=r("5a89"),i=r("6622"),c=r("c0d6"),s=r("e702"),l=new n["j"]("ip-layout-ccdfdc",!0,{selection:!1}),u=new n["a"](i["token"]),d=new n["e"],p=60;function f(e){return Math.round(e/p/2)*p*2}function b(e){return new _["jc"](e.position.x-e.scale.x/2,e.position.y-e.scale.y/2,e.position.z)}function v(e){var t=(new _["jc"]).copy(e[0].position);return e.forEach((function(e){return t=t.min(b(e))})),t.divideScalar(p)}function m(e){a=v(e).toArray();var t=new Set;e.forEach((function(e){for(var r=b(e).divideScalar(p).toArray(),o=(new _["jc"]).copy(e.scale).divideScalar(p).toArray(),n=0;n<3;++n)r[n]-=a[n];for(var i=r[0];i<r[0]+o[0];++i)for(var c=r[1];c<r[1]+o[1];++c)for(var s=r[2];s<r[2]+o[2];++s)t.add([i,c,s].join())}));var r=Array.from(t);return r.map((function(e){return e.split(",").map(Number)}))}function g(){c["store"].sendData=function(){l.signals.overlayStarted.dispatch("loading..."),l.changeLayer("box");var e=m(l.objects);u.sendArchiJSON("ip",[],{domain:e,templates:c["store"].templates})},c["store"].revert=function(){l.changeLayer("default"),l.signals.sceneChanged.active=!1;var e,t=[],r=Object(o["a"])(l.objects);try{for(r.s();!(e=r.n()).done;){var a=e.value;t.push(new n["g"](l,a))}}catch(i){r.e(i)}finally{r.f()}var _=new s["MultiCmdsCommand"](l,t);l.execute(_),l.signals.sceneChanged.active=!0,l.changeLayer("box"),l.objects.forEach((function(e){return e.visible=!0})),l.option.autosave=!0},u.onReceive=function(e){l.option.autosave=!1,l.changeLayer("box"),l.objects.forEach((function(e){return e.visible=!1})),l.signals.sceneChanged.active=!1;for(var t=e.ks.length,r=0;r<t;++r){var o=new _["F"];l.scene.add(o);for(var i=new _["F"],s=c["store"].colors[e.ks[r]],u=c["store"].templates[e.ks[r]],f=0;f<u.length;++f){var b=[e.ps[r][0]+u[f][0]+a[0]+.5,e.ps[r][1]+u[f][1]+a[1]+.5,e.ps[r][2]+u[f][2]+a[2]];i.add(new n["b"](l,b,[1,1,1],{material:d.Glass(s)}))}i.scale.set(p,p,p),o.add(i)}l.changeLayer("default"),l.signals.sceneChanged.active=!0,l.signals.overlayFinished.dispatch()}}function w(){var e=new n["b"](l,[180,180,0],[360,360,600]);l.removeObjectLayer(e,"default"),l.addObjectLayer(e,"box");var t=new n["b"](l,[300,300,480],[240,240,240]);l.removeObjectLayer(t,"default"),l.addObjectLayer(t,"box"),l.changeLayer("box");var r=new n["b"](l,[420,420,0],[240,600,240]);l.removeObjectLayer(r,"default"),l.addObjectLayer(r,"box"),l.changeLayer("box");var a=new n["b"](l,[-180,300,0],[600,240,240]);l.removeObjectLayer(a,"default"),l.addObjectLayer(a,"box"),l.changeLayer("box")}function h(){l.transformer.draggingChanged=function(e,t){t||"Cuboid"!==e.type||(e.scale.x=f(e.scale.x),e.scale.y=f(e.scale.y),e.scale.z=f(e.scale.z))},l.option.grid=p,l.option.snap=!0,w(),g(),c["store"].bindMain=function(){window.viewport=l}}},4360:function(e,t,r){"use strict";r.r(t);var a=r("2b0e"),o=r("2f62");a["a"].use(o["a"]),t["default"]=new o["a"].Store({state:{},mutations:{},actions:{},modules:{}})},"4d70":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{position:"absolute",top:"10px",right:"10px","z-index":"999"}},[r("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[r("v-btn",e._g(e._b({staticStyle:{background:"white"},attrs:{color:"primary",icon:"",fab:"",elevation:"5"}},"v-btn",o,!1),a),[r("v-icon",[e._v(" mdi-cog ")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("DragCard",{attrs:{top:30,left:30}}),r("Viewer",{attrs:{gui:!1,container:"ip-template-ccdfdc",filename:"ip-template.js"}}),r("div",{staticStyle:{position:"absolute",top:"10px",right:"10px"}},[r("v-btn",{staticStyle:{background:"white"},attrs:{icon:"",color:"primary",fab:""},on:{click:e.click}},[r("v-icon",[e._v(" mdi-close ")])],1)],1)],1)],1)],1)},o=[],n=r("08f7"),_=r("c0d6"),i={name:"Drawer",components:{DragCard:n["default"]},data:function(){return{dialog:!1}},methods:{click:function(){this.dialog=!1,_["store"].bindMain()}}},c=i,s=r("2877"),l=r("6544"),u=r.n(l),d=r("8336"),p=r("b0af"),f=r("169a"),b=r("132d"),v=Object(s["a"])(c,a,o,!1,null,"301778bc",null);t["default"]=v.exports;u()(v,{VBtn:d["a"],VCard:p["a"],VDialog:f["a"],VIcon:b["a"]})},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),o=r("3dfd"),n=r("a18c"),_=r("402c"),i=r("b645");a["a"].use(i["k"]),a["a"].config.productionTip=!1,new a["a"]({router:n["default"],vuetify:_["default"],render:function(e){return e(o["default"])}}).$mount("#app")},6622:function(e,t,r){"use strict";r.r(t),r.d(t,"url",(function(){return a})),r.d(t,"token",(function(){return o}));var a="https://web.archialgo.com",o="ccdfdc92-ed0b-41e3-b3bc-2e862b89f4d5"},"85ec":function(e,t,r){},a18c:function(e,t,r){"use strict";r.r(t);var a=r("2b0e"),o=r("8c4f"),n=r("324e");a["a"].use(o["a"]);var _=[{path:"/",name:"Home",component:n["default"],meta:{title:"ArchiWeb"}}],i=new o["a"]({routes:_});i.afterEach((function(e,t){a["a"].nextTick((function(){document.title=e.meta.title||"ArchiWeb"}))})),t["default"]=i},a8ec:function(e,t,r){var a={"./App":"3dfd","./App.vue":"3dfd","./grid-cube":"4078","./grid-cube.js":"4078","./ip-template":"ff9c","./ip-template.js":"ff9c","./main":"56d7","./main.js":"56d7","./plugins/vuetify":"402c","./plugins/vuetify.js":"402c","./router":"a18c","./router/":"a18c","./router/index":"a18c","./router/index.js":"a18c","./sensitiveInfo":"6622","./sensitiveInfo.js":"6622","./store":"c0d6","./store.js":"c0d6","./store/":"4360","./store/index":"4360","./store/index.js":"4360","./views/DragCard":"08f7","./views/DragCard.vue":"08f7","./views/Drawer":"4d70","./views/Drawer.vue":"4d70","./views/Viewport":"324e","./views/Viewport.vue":"324e"};function o(e){var t=n(e);return r(t)}function n(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=n,e.exports=o,o.id="a8ec"},c0d6:function(e,t,r){"use strict";r.r(t),r.d(t,"store",(function(){return a}));var a={}},ff9c:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var D_amomorning_Desktop_project_ip_layout_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b85c"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("1276"),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("a434"),core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_4__),three__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5a89"),_inst_aaa_archiweb_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("b645"),_store_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("c0d6"),viewport=new _inst_aaa_archiweb_core__WEBPACK_IMPORTED_MODULE_6__["j"]("ip-template-ccdfdc",!1,{selection:!1}),templates=[[[0,0,0],[1,0,0],[0,1,0]],[[0,0,0],[-1,0,0],[0,-1,0]],[[0,1,0],[0,0,0],[0,-1,0]],[[1,0,0],[0,0,0],[-1,0,0]],[[0,0,0],[1,0,0],[0,0,1]],[[0,0,0],[1,0,0],[0,0,-1]],[[0,0,0],[-1,0,0],[0,0,1]],[[0,0,0],[-1,0,0],[0,0,-1]],[[0,0,0],[0,1,0],[0,0,1]],[[0,0,0],[0,1,0],[0,0,-1]],[[0,0,0],[0,-1,0],[0,0,1]],[[0,0,0],[0,-1,0],[0,0,-1]],[[0,0,-1],[0,0,0],[0,0,1]],[[0,0,0],[0,0,1],[0,0,2],[0,1,0],[0,1,1],[0,1,2],[0,2,0],[0,2,1],[0,2,2],[1,0,0],[1,0,1],[1,0,2],[1,1,0],[1,1,1],[1,1,2],[1,2,0],[1,2,1],[1,2,2],[2,0,0],[2,0,1],[2,0,2],[2,1,0],[2,1,1],[2,1,2],[2,2,0],[2,2,1],[2,2,2]]],colors=[],scale=60,mt=new _inst_aaa_archiweb_core__WEBPACK_IMPORTED_MODULE_6__["e"];function drawTemplate(e,t){var r=4*(t-Math.floor(templates.length/2)),a=new three__WEBPACK_IMPORTED_MODULE_5__["F"],o=new three__WEBPACK_IMPORTED_MODULE_5__["F"];viewport.scene.add(a);var n,_=Object(D_amomorning_Desktop_project_ip_layout_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__["a"])(e);try{for(_.s();!(n=_.n()).done;){var i=n.value,c=new _inst_aaa_archiweb_core__WEBPACK_IMPORTED_MODULE_6__["b"](viewport,i,[1,1,1],{material:mt.Matte(colors[t])});o.add(c)}}catch(s){_.e(s)}finally{_.f()}o.scale.set(scale,scale,scale),o.position.x=r*scale,a.add(o),a.userData.id=t}function randomColor(){return(new three__WEBPACK_IMPORTED_MODULE_5__["n"]).setHSL(Math.random(),.4,.7).getHex()}function draw(){viewport.clear();for(var e=0;e<templates.length;++e)drawTemplate(templates[e],e);viewport.changeLayer(viewport.layer),_store_js__WEBPACK_IMPORTED_MODULE_7__["store"].templates=templates}function generateColor(){for(var e=0;e<templates.length;++e)colors[e]=randomColor();_store_js__WEBPACK_IMPORTED_MODULE_7__["store"].colors=colors}function main(){viewport.scene.background.color=new three__WEBPACK_IMPORTED_MODULE_5__["n"](255),viewport.environment.skyColorUpdate(!1),viewport.environment.lightOnly(),generateColor(),draw(),viewport.signals.sceneChanged.dispatch(),viewport.transformer.objectChanged=function(e){if(e&&void 0!==e.userData.id){_store_js__WEBPACK_IMPORTED_MODULE_7__["store"].DragCard.id=e.userData.id;var t=JSON.stringify(templates[e.userData.id]).split("],"),r=t.join("],\n");_store_js__WEBPACK_IMPORTED_MODULE_7__["store"].DragCard.content=r,_store_js__WEBPACK_IMPORTED_MODULE_7__["store"].DragCard.show=!0}else _store_js__WEBPACK_IMPORTED_MODULE_7__["store"].DragCard.show=!1},viewport.transformer.control.showX=!1,viewport.transformer.control.showY=!1,viewport.transformer.control.showZ=!1,_store_js__WEBPACK_IMPORTED_MODULE_7__["store"].deleteTemplate=function(e){templates.splice(e,1),colors.splice(e,1),draw()},_store_js__WEBPACK_IMPORTED_MODULE_7__["store"].createTemplate=function(content){var arr=eval(content);templates.push(arr),colors.push(randomColor()),draw()},_store_js__WEBPACK_IMPORTED_MODULE_7__["store"].changeColor=function(){generateColor(),draw()},_store_js__WEBPACK_IMPORTED_MODULE_7__["store"].bindTemplate=function(){window.viewport=viewport}}}});